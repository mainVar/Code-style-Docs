# Unity & rules #
## Git ##
Работа с репозиторием (это пример правел работы с гитом)
В качестве клиента используется GitKraken(основной), также git Bash, tortoisGit. 
Основные ветки проекта:
●	master - стабильные коммиты, релизного уровня
●	develop - ветка в которую сливаются все проверенные изменения разработчиков, работающих на проекте
●	general - ветка для мерджей изменений от всех разработчиков, разрешения конфликтов и проверки результатов
Каждому разработчику создаётся отдельная ветка, в которой он работает, все изменения из веток разработчиков сливаются в ветку general лидом, и после разрешения конфликтов и проверки работоспособности и возможности собрать билд, отправляются в develop. 
После чего разработчики забирают коммит из ветки develop в свою ветку. После того как кто то смерджил что либо в свою ветку, он сразу же делает коммит, push, чтобы это было видно в истории репозитория. 
В частных случаях, для конкретной задачи может создаваться отдельная, временная ветка, в этом случае ветка будет называться feature/имя_ветки, для этого можно настроить git flow.
Не перехожу в какие либо ветки кроме выданной разработчику для работы, т.е. нельзя переходить в чужие ветки и что то там менять.
Если кому то из разработчиков срочно необходимо забрать чьи то изменения, лид делает мердж в ветку general и разработчики забирают коммит с мерджем.



## Unity (Smart Merge): ##
*  Unity Smart Merge настройку выполняю через free версию Plastic SCM
Дополнительная информация 
* https://docs.unity3d.com/Manual/SmartMerge.html


## Структура проекта: ##
Само собой что, описанное не касается сторонних ассетов, плагинов, фрэймворков и т.д., которые будут импортированы в проект со своей собственной структурой
ProjectAssets, весь контент, код, и всё что связано с проектом, будет содержаться в этой папке

*	Scenes - в этой папке содержатся все сцены, созданные в процессе разработки проекта
*	Scripts - в этой папке содержатся все скрипты, написанные в процессе разработки проекта
*	Models - папка в которой содержаться все модели, используемые в проекте
*	Sprites - папка в которой содержаться все 2D изображения, используемые в проекте, как спрайты, в основном это относится к интерфейсу всегда содержит чисто белую текстуру 16х16 пикселей с названием empty.png
*	Textures - в этой папке лежат текстуры, используемые в проекте не в качестве спрайтов
	-Cubemaps
	-Skyboxes
	-Particles
*	Fonts - папка содержащая шрифты, используемые в проекте, и фонт ассеты при использовании TextMeshPro
*	Audio - папка содержащая все аудиофайлы, используемые в проекте.
*	Prefabs - папка содержащая все префабы, используемые в проекте.
*	Bundles - папка, содержащая бандлы - весь контент не включённый в сборку, из которого собираются бандлы, подгружаемые в приложение, внутренняя структура папки зависит от проекта

ProjectResources - в этой папке будет содержаться весь контент приложения, вынесенный в ресурсы, внутренняя структура папки зависит от проекта

StreamingAssets
*   ProjectAssets - в этой папке содержаться все данные, которые приложение будет получать в чистом виде с диска, или в случае с WebGL, по относительному пути к приложению. Например потоковые аудио и видео файлы. Внутренняя структура папки зависит от проекта.


## Работа со сценой ##
Для того что бы над сценой могли безопасно работать несколько человек, можно/нужно использовать следующие подходы:
*	использовать префабы
*	использовать синглтоны
*	все ивенты для кнопок и других элементов сцены назначать в коде
*	выбрано основное разрешение экрана, в котором, и только в нём, сохраняется сцена
*	любые изменения в состояниях объектов, например кнопок, реализовывать в скриптах, например ситуация когда смена состояний объекта привязана к анимациям через transition кнопки неприемлема,
так как не позволит нормальным путём изменить состояние объекта из кода, ExecuteEvents тут не всегда поможет 
Работая над анимациями и некоторыми другими ассетами юнити, нужно помнить, что для того чтобы изменения вступили в полную силу, и вошли в состав коммита, нужно сохранить проект или сцену, достаточно обычно просто ctrl+s.

## Префабы ##
Верстая отдельное окно/элемент интерфейса на сцене, делаем его префабом, чтобы дальнейшие изменения в нём сохранялись не посредством сохранения сцены, а через кнопку Apply префаба. 
Так можно избежать лишних конфликтов.
Никакие ссылки/зависимости не должны выходить за пределы префаба.

## Синглтоны ##
Если объект глобальный или в любой момент работы приложения, на сцене не может присутствовать более одного экземпляра объекта, то создаём статический getter для доступа к экземпляру объекта.

## Иветны и колбэки ##
В целях облегчения рефакторинга и поиска по коду нужно избегать пробрасывания событий кнопкам и т.д. на сцене или в префабе. 
Вместо этого события нужно добавлять в коде в Awake/Start/OnEnable или по мере необходимости.
Или прибегнуть к "забинживанию" через OnValidate()

## Основное разрешение экрана ##
Разработка и тесты могут вестись при любом разрешении экрана, но перед сохранением сцены или применением Apply префабам, нужно выставить основное разрешение для проекта.





